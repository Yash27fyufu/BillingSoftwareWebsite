
CREATE TABLE bill_details (
    BILL_ID int NOT NULL,
    BILL_TYPE varchar(20) DEFAULT NULL,
    PACKINGS int DEFAULT NULL,
    TRANSPORT varchar(70) DEFAULT NULL,
    SUBTOTAL float DEFAULT NULL,
    ROUND_OFF float DEFAULT NULL,
    FREIGHT float DEFAULT NULL,
    DISCOUNT_PERC float DEFAULT NULL,
    TOTAL float DEFAULT NULL,
    AMOUNT_SETTLED float DEFAULT NULL
  ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
  
  CREATE TABLE bill_items (
    BILL_ID int NOT NULL,
    ITEM_ID int NOT NULL,
    QUANTITY float DEFAULT NULL,
    UNIT_ID int DEFAULT NULL,
    PRICE float DEFAULT NULL,
    DISCOUNT float DEFAULT NULL,
    GST_ID int DEFAULT NULL,
    BILL_TYPE varchar(20) DEFAULT NULL
  ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
  
  CREATE TABLE bill_note (
    BILL_ID int DEFAULT NULL,
    BILL_NOTE varchar(1000) DEFAULT NULL
  ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
  
  CREATE TABLE bill_items (
    BILL_ID int NOT NULL,
    ITEM_ID int NOT NULL,
    QUANTITY float DEFAULT NULL,
    UNIT_ID int DEFAULT NULL,
    PRICE float DEFAULT NULL,
    DISCOUNT float DEFAULT NULL,
    GST_ID int DEFAULT NULL,
    BILL_TYPE varchar(20) DEFAULT NULL
  ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
  
  CREATE TABLE bill_series (
    BILL_SERIES_ID int NOT NULL,
    BILL_SERIES varchar(25) NOT NULL,
    DISPLAY tinyint(1) NOT NULL,
    PREFIX tinyint(1) NOT NULL,
    PRIMARY KEY (BILL_SERIES_ID)
  ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
  
  CREATE TABLE cash_parties (
    PARTY_ID int NOT NULL,
    BILLING_NAME varchar(100) DEFAULT NULL,
    PARTY_ADDRESS varchar(150) DEFAULT NULL,
    PARTY_PINCODE int DEFAULT NULL,
    PARTY_MAIL varchar(100) DEFAULT NULL,
    PARTY_GST varchar(20) DEFAULT NULL,
    PARTY_NUMBER_1 varchar(15) DEFAULT NULL,
    PARTY_NUMBER_2 varchar(15) DEFAULT NULL,
    NOTE varchar(200) DEFAULT NULL,
    DISPLAY tinyint(1) DEFAULT NULL,
    TRANSPORT_NAME varchar(50) DEFAULT NULL,
    PRIMARY KEY (PARTY_ID)
  ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
  
  CREATE TABLE categories (
    CATEGORY_ID int NOT NULL,
    CATEGORY_NAME varchar(100) DEFAULT NULL,
    PRIMARY KEY (CATEGORY_ID)
  ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
  
  CREATE TABLE categories_subcategory_relation (
    CATEGORY_ID int DEFAULT NULL,
    SUBCATEGORY_OR_ITEM_ID int DEFAULT NULL,
    KEY CATEGORY_ID (CATEGORY_ID),
    CONSTRAINT categories_subcategory_relation_ibfk_1 FOREIGN KEY (CATEGORY_ID) REFERENCES categories (CATEGORY_ID)
  ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
  
  CREATE TABLE category_images (
    CATEGORY_ID int DEFAULT NULL,
    CATEGORY_IMAGE_PATH varchar(200) DEFAULT NULL,
    KEY CATEGORY_ID (CATEGORY_ID),
    CONSTRAINT category_images_ibfk_1 FOREIGN KEY (CATEGORY_ID) REFERENCES categories (CATEGORY_ID)
  ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
  
  CREATE TABLE contact_persons (
    CONTACT_PERSON_NAME varchar(30) NOT NULL,
    CONTACT_PERSON_NUMBER varchar(15) NOT NULL,
    CONTACT_PERSON_MAIL varchar(100) DEFAULT NULL,
    PARTY_ID int NOT NULL,
    KEY PARTY_ID (PARTY_ID),
    CONSTRAINT contact_persons_ibfk_1 FOREIGN KEY (PARTY_ID) REFERENCES parties (PARTY_ID)
  ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
  
  CREATE TABLE gst_type (
    GST_ID int NOT NULL,
    GST_PERCENTAGE int DEFAULT NULL,
    DISPLAY tinyint(1) NOT NULL,
    PRIMARY KEY (GST_ID),
    UNIQUE KEY gst_perc (GST_PERCENTAGE)
  ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
  
  CREATE TABLE hsn_details (
    HSN_ID int NOT NULL,
    HSN_CODE varchar(10) DEFAULT NULL,
    GST_REF_ID int DEFAULT NULL,
    DISPLAY tinyint(1) DEFAULT NULL,
    PRIMARY KEY (HSN_ID),
    KEY GST_REF_ID (GST_REF_ID),
    CONSTRAINT hsn_details_ibfk_1 FOREIGN KEY (GST_REF_ID) REFERENCES gst_type (GST_ID)
  ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
  
  CREATE TABLE items (
    ITEM_ID int NOT NULL,
    ITEM_NAME varchar(255) DEFAULT NULL,
    ITEM_CODE varchar(50) DEFAULT NULL,
    ITEM_GST_TYPE_ID int DEFAULT NULL,
    ITEM_BRAND varchar(50) DEFAULT NULL,
    ITEM_PURCHASE_PRICE float DEFAULT NULL,
    ITEM_PURCHASE_DISCOUNT float DEFAULT NULL,
    ITEM_PURCHASE_QUANTITY float DEFAULT NULL,
    ITEM_SALES_PRICE float DEFAULT NULL,
    ITEM_SALES_DISCOUNT float DEFAULT NULL,
    ITEM_SALES_QUANTITY float DEFAULT NULL,
    ITEM_DEFAULT_UNIT_ID int DEFAULT NULL,
    DISPLAY tinyint(1) NOT NULL,
    ITEM_OPENING_QTY int DEFAULT NULL,
    ITEM_HSN_ID int DEFAULT NULL,
    PRIMARY KEY (ITEM_ID),
    UNIQUE KEY item_name (ITEM_NAME),
    KEY ITEM_GST_TYPE_ID (ITEM_GST_TYPE_ID),
    KEY ITEM_DEFAULT_UNIT_ID (ITEM_DEFAULT_UNIT_ID),
    KEY ITEM_HSN_ID (ITEM_HSN_ID),
    CONSTRAINT items_ibfk_1 FOREIGN KEY (ITEM_GST_TYPE_ID) REFERENCES gst_type (GST_ID),
    CONSTRAINT items_ibfk_2 FOREIGN KEY (ITEM_DEFAULT_UNIT_ID) REFERENCES unit (UNIT_ID),
    CONSTRAINT items_ibfk_3 FOREIGN KEY (ITEM_HSN_ID) REFERENCES hsn_details (HSN_ID)
  ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
  
  
CREATE TABLE ITEM_DESCRIPTIONS(
ITEM_ID INT NOT NULL,
ITEM_DESCRIPTION VARCHAR(250),
FOREIGN KEY (ITEM_ID) REFERENCES ITEMS (ITEM_ID)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;


  CREATE TABLE p2ptransfer (
    P2P_TRANSFER_ID int NOT NULL AUTO_INCREMENT,
    FROM_PARTY_ID int NOT NULL,
    TO_PARTY_ID int NOT NULL,
    PRIMARY KEY (P2P_TRANSFER_ID)
  ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
  
  CREATE TABLE parties (
    PARTY_ID int NOT NULL,
    PARTY_NAME varchar(60) NOT NULL,
    PARTY_ADDRESS varchar(150) DEFAULT NULL,
    PARTY_PINCODE int DEFAULT NULL,
    PARTY_MAIL varchar(100) DEFAULT NULL,
    PARTY_GST varchar(20) DEFAULT NULL,
    PARTY_NUMBER_1 varchar(15) DEFAULT NULL,
    PARTY_NUMBER_2 varchar(15) DEFAULT NULL,
    PARTY_OPENING_BALANCE float DEFAULT NULL,
    PARTY_OPENING_BALANCE_DATE date DEFAULT NULL,
    NOTE varchar(200) DEFAULT NULL,
    DISPLAY tinyint(1) DEFAULT NULL,
    BILLING_NAME varchar(100) DEFAULT NULL,
    TRANSPORT_NAME varchar(50) DEFAULT NULL,
    TO_RECEIVE tinyint(1) DEFAULT NULL,
    PRIMARY KEY (PARTY_ID)
  ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
  
  CREATE TABLE payment_allocation (
    PAYMENT_ALLOCATION_ID int NOT NULL AUTO_INCREMENT,
    AMOUNT float NOT NULL,
    PAYMENT_ID int NOT NULL,
    BILL_TYPE varchar(20) DEFAULT NULL,
    BILL_ID int NOT NULL,
    PRIMARY KEY (PAYMENT_ALLOCATION_ID)
  ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
  
  CREATE TABLE payment_modes (
    PAYMENT_MODE_ID int NOT NULL,
    MODE_NAME varchar(100) DEFAULT NULL,
    DISPLAY tinyint(1) DEFAULT NULL,
    PRIMARY KEY (PAYMENT_MODE_ID)
  ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
  
  CREATE TABLE payments (
    PAYMENT_ID int NOT NULL AUTO_INCREMENT,
    PAYMENT_MODE_ID int NOT NULL,
    AMOUNT float DEFAULT NULL,
    PAYMENT_DATE datetime DEFAULT NULL,
    PAYMENT_TYPE enum('IN','OUT') NOT NULL,
    PRIMARY KEY (PAYMENT_ID)
  ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
  
  CREATE TABLE sales_bill (
    SALES_ID int NOT NULL,
    PARTY_ID int DEFAULT NULL,
    BILL_SERIES_ID int DEFAULT NULL,
    BILL_NUMBER int DEFAULT NULL,
    BILL_DATE datetime DEFAULT NULL,
    BILL_CREATED_DATE datetime DEFAULT NULL,
    BILL_LAST_UPDATED datetime DEFAULT NULL,
    BILL_YEAR int DEFAULT NULL,
    CASH_ENTRY tinyint(1) DEFAULT NULL,
    PRIMARY KEY (SALES_ID),
    KEY sales_bill_ibfk_1 (BILL_SERIES_ID),
    KEY sales_bill_ibfk_2 (PARTY_ID),
    CONSTRAINT sales_bill_ibfk_1 FOREIGN KEY (BILL_SERIES_ID) REFERENCES bill_series (BILL_SERIES_ID),
    CONSTRAINT sales_bill_ibfk_2 FOREIGN KEY (PARTY_ID) REFERENCES parties (PARTY_ID)
  ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
  
  CREATE TABLE unit (
    UNIT_ID int NOT NULL,
    UNIT_NAME varchar(50) DEFAULT NULL,
    UNIT_SHORT_FORM varchar(15) DEFAULT NULL,
    DISPLAY tinyint(1) NOT NULL,
    PRIMARY KEY (UNIT_ID),
    UNIQUE KEY uq_unit_name (UNIT_NAME),
    UNIQUE KEY uq_unit_short_form (UNIT_SHORT_FORM)
  ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
  
  CREATE TABLE user_company_details (
    USER_ID int unsigned NOT NULL,
    COMPANY_NAME varchar(20) DEFAULT NULL,
    COMPANY_PHONE_NUMBER varchar(20) DEFAULT NULL,
    COMPANY_ADDRESS varchar(200) DEFAULT NULL,
    COMPANY_GSTIN varchar(20) DEFAULT NULL,
    MAIL_ID varchar(50) DEFAULT NULL,
    UNIQUE KEY COMPANY_GSTIN (COMPANY_GSTIN),
    UNIQUE KEY MAIL_ID (MAIL_ID),
    KEY USER_ID (USER_ID),
    CONSTRAINT user_company_details_ibfk_1 FOREIGN KEY (USER_ID) REFERENCES users (USER_ID)
  ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
  
  CREATE TABLE user_tokens (
    TOKEN_ID int unsigned NOT NULL AUTO_INCREMENT,
    USER_ID int unsigned NOT NULL,
    USER_TOKEN varchar(170) NOT NULL,
    TOKEN_EXPIRY_TIME datetime NOT NULL,
    DEVICE_IP varchar(20) DEFAULT NULL,
    PRIMARY KEY (TOKEN_ID),
    UNIQUE KEY USER_TOKEN (USER_TOKEN)
  ) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
  
  CREATE TABLE users (
    USER_ID int unsigned NOT NULL AUTO_INCREMENT,
    USER_NAME varchar(255) NOT NULL,
    USER_PASSWORD varchar(100) DEFAULT NULL,
    PRIMARY KEY (USER_ID)
  ) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
  
  